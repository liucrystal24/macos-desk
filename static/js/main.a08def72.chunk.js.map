{"version":3,"sources":["img/Calculator.png","img/Chrome.png","img/Drawing.png","img/Finder.png","img/Launchpad.png","img/PrefApp.png","img/Terminal.png","img/gougu.jpg","img/wallpaper.jpg","img/wallpaper_small.jpg","components/modal/draggable/index.tsx","components/modal/Modal.tsx","components/iconfont/index.tsx","components/drawing/Canvas.tsx","components/dialog/index.tsx","components/drawing/index.tsx","components/modal/UseModal.tsx","components/footer/Footer.tsx","App.tsx","serviceWorker.ts","index.tsx","img sync /^/.//.*$"],"names":["module","exports","Draggable","children","domEl","data","dragEl","document","getElementById","id","moveEl","moveId","localPosition","localStorage","getItem","initPosition","JSON","parse","x","width","window","innerWidth","y","height","innerHeight","useState","isDragging","origin","position","state","setState","handleMouseDown","useCallback","clientX","clientY","handleMouseMove","target","offsetWidth","offsetHeight","newPosition","handleMouseUp","useEffect","addEventListener","removeEventListener","setItem","stringify","styles","useMemo","left","top","isShow","zIndex","style","onMouseDown","Modal","React","memo","ReactDOM","createPortal","scriptElem","createElement","src","body","appendChild","Iconfont","className","type","svgRef","clickEvent","ref","aria-hidden","onClick","xlinkHref","UseCanvas","canvasHistory","setCanvasHistory","canvasRef","useRef","loadPic","current","context","getContext","canvasPic","Image","length","console","log","drawImage","Canvas","isPainting","setIsPainting","undefined","mousePosition","setMousePosition","toolsMap","eraserEnabled","setEraserEnabled","onToolsClick","tool","isToolboxOpen","setIsToolboxOpen","lineWidth","setLineWidth","strokeStyle","setStrokeStyle","colorMap","backRef","nextRef","step","setStep","isVisible","setIsVisible","openDialog","closeDialog","RenderDialog","title","message","imgSrc","onCheck","onClose","display","borderRadius","icon","require","alt","renderIcon","buttons","color","useDialog","isClearDialogOpen","setClearDialogOpen","closeClearDialog","getOffset","el","offsetStyle","OffsetNum","offsetTop","offsetLeft","offsetParent","getCoordinates","event","canvas","pageX","pageY","drawLine","originalMousePosition","newMousePosition","lineJoin","beginPath","moveTo","lineTo","closePath","stroke","clearArc","radius","ctx","stepClear","calcWidth","calcHeight","Math","sqrt","posX","posY","widthX","heightY","clearRect","clearArcFun","r","startPaint","coordinates","paint","newr","Number","saveFragment","push","toDataURL","back","next","classList","add","remove","exitPaint","leaveCanvas","toolboxOpenClick","onSizesChange","e","value","onColorsClick","selector","onColorsChange","saveCanvas","compositeOperation","globalCompositeOperation","fillStyle","fillRect","imageData","putImageData","getImageData","a","href","dateNow","moment","format","download","click","changeCanvas","currentStep","checkClearDialog","go","onOptionsClick","toolName","fontSize","CSSTransition","in","timeout","classNames","unmountOnExit","map","option","index","key","backgroundColor","name","min","max","onChange","defaultProps","UseDrawing","close","open","RenderModal","closeModal","useModal","Drawing","useContext","FooterContext","isDrawingOpen","setDrawingOpen","isDrawingShow","setDrawingShow","setStyle","isFullscreen","setFullscreen","maximizeClick","controls","onCloseClick","onMinimizeClick","onMaximizeClick","onResizeClick","setTimeout","clientHeight","clientWidth","createContext","Footer","defaultWidth","dockerRef","dockList","scaleNum","getDockerOffset","mouseLeave","imgList","childNodes","i","img","mouseMove","scaleImg","dockItemClick","item","forEach","docker","Provider","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","App","Boolean","location","hostname","match","render","StrictMode","navigator","serviceWorker","ready","then","registration","unregister","catch","error","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","keys","Object","resolve"],"mappings":"iHAAAA,EAAOC,QAAU,IAA0B,wC,oBCA3CD,EAAOC,QAAU,IAA0B,oC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,oC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,qC,oBCA3CD,EAAOC,QAAU,IAA0B,sC,oBCA3CD,EAAOC,QAAU,IAA0B,mC,oBCA3CD,EAAOC,QAAU,IAA0B,uC,oBCA3CD,EAAOC,QAAU,IAA0B,6C,+ICuJ5BC,EAvHG,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,SAAUC,EAAyB,EAAzBA,MAAOC,EAAkB,EAAlBA,KAC9BC,EAASC,SAASC,eAAeH,EAAKI,IACtCC,EAASH,SAASC,eAAeH,EAAKM,QACtCC,EAAgBC,aAAaC,QAAQT,EAAKI,KAAO,KACjDM,EAAeH,EACjBI,KAAKC,MAAML,GACX,CACEM,GAAmB,IAAhBb,EAAKc,MAAe,GAAKC,OAAOC,WAAahB,EAAKc,OAAS,EAC9DG,GAAoB,IAAjBjB,EAAKkB,OAAgB,GAAKH,OAAOI,YAAcnB,EAAKkB,QAAU,GARjB,EAW5BE,mBAAS,CACjCC,YAAY,EACZC,OAAQ,CAAET,EAAG,EAAGI,EAAG,GACnBM,SAAUb,IAd0C,mBAW/Cc,EAX+C,KAWxCC,EAXwC,KAiBhDC,EAAkBC,uBAAY,YAA2B,IAAxBC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QAC9CJ,GAAS,SAACD,GAAD,mBAAC,eACLA,GADI,IAEPH,YAAY,EAEZC,OAAQ,CACNT,EAAGe,EAAUJ,EAAMD,SAASV,EAC5BI,EAAGY,EAAUL,EAAMD,SAASN,UAG/B,IAGGa,EAAkBH,uBAEtB,YAAmC,IAAhCC,EAA+B,EAA/BA,QAASC,EAAsB,EAAtBA,QAASE,EAAa,EAAbA,OACnB,GAAKP,EAAMH,cAAehB,GAAU0B,IAAW1B,GAA/C,CACA,IAAIQ,EAAIe,EAAUJ,EAAMF,OAAOT,EAC3BI,EAAIY,EAAUL,EAAMF,OAAOL,EAC3BJ,GAAK,EACPA,EAAI,EACKA,EAAIE,OAAOC,WAAaf,EAAO+B,cACxCnB,EAAIE,OAAOC,WAAaf,EAAO+B,aAE7Bf,GAAK,EACPA,EAAI,EACKA,EAAIF,OAAOI,YAAclB,EAAOgC,eACzChB,EAAIF,OAAOI,YAAclB,EAAOgC,cAElC,IAAMC,EAAc,CAAErB,IAAGI,KACzBQ,GAAS,SAACD,GAAD,mBAAC,eACLA,GADI,IAEPD,SAAUW,UAGd,CAACV,EAAMH,WAAYG,EAAMF,OAAQjB,EAAQJ,IAGrCkC,EAAgBR,uBAAY,WAC5BH,EAAMH,YACRI,GAAS,SAACD,GAAD,mBAAC,eACLA,GADI,IAEPH,YAAY,SAGf,CAACG,EAAMH,aAGVe,qBAAU,YACY,IAAhBpC,EAAKc,OACPW,EAAS,CACPJ,YAAY,EACZC,OAAQ,CAAET,EAAG,EAAGI,EAAG,GACnBM,SAAU,CAAEV,EAAG,EAAGI,EAAG,OAGxB,CAACjB,EAAKc,QAETsB,qBAAU,WACR,GAAKrC,EAGL,OAFAA,EAAMsC,iBAAiB,YAAaP,GACpC/B,EAAMsC,iBAAiB,UAAWF,GAC3B,WACLpC,EAAMuC,oBAAoB,YAAaR,GACvC/B,EAAMuC,oBAAoB,UAAWH,IACjB,IAAhBnC,EAAKc,OACPN,aAAa+B,QAAQvC,EAAKI,GAAIO,KAAK6B,UAAUhB,EAAMD,cAGtD,CACDxB,EACA+B,EACAK,EACAnC,EAAKI,GACLJ,EAAKc,MACLU,EAAMD,WAGR,IAAMkB,EAASC,mBACb,iBAAO,CACLC,KAAK,GAAD,OAAKnB,EAAMD,SAASV,EAApB,MACJ+B,IAAK5C,EAAK6C,OAAL,UAAiBrB,EAAMD,SAASN,EAAhC,MAAwC,UAE7C6B,OAAQtB,EAAMH,WAAa,EAAI,EAG/BE,SAAU,cAEZ,CAACC,EAAMH,WAAYG,EAAMD,SAAUvB,EAAK6C,SAG1C,OACE,yBACEzC,GAAIJ,EAAKI,GACT2C,MAAON,EACPO,YAAatB,GAEZ5B,ICvGQmD,EAbDC,IAAMC,MAAK,YAAgC,IAA7BrD,EAA4B,EAA5BA,SAAUE,EAAkB,EAAlBA,KAC9BD,EAAQG,SAASC,eAAe,aACtC,OAAKJ,EAGEqD,IAASC,aACd,kBAAC,EAAD,CAAWtD,MAAOA,EAAOC,KAAMA,GAC5BF,GAEHC,GAPiB,Q,yBC7BfuD,G,OAAapD,SAASqD,cAAc,WAC1CD,EAAWE,IAAM,gDACjBtD,SAASuD,KAAKC,YAAYJ,GAUnB,IAAMK,EAAW,SAAC,GAMN,IALjBC,EAKgB,EALhBA,UACAC,EAIgB,EAJhBA,KACAd,EAGgB,EAHhBA,MACAe,EAEgB,EAFhBA,OACAC,EACgB,EADhBA,WAEA,OACE,yBACEC,IAAKF,EACLF,UAAWA,EAAY,aAAeA,EAAY,YAClDK,cAAY,OACZlB,MAAOA,EACPmB,QAASH,GAET,yBAAKI,UAAS,WAAMN,O,SCWbO,G,MAAY,WAAO,IAAD,EACahD,mBAAmB,IADhC,mBACtBiD,EADsB,KACPC,EADO,KAEvBC,EAAYC,iBAA0B,MACtCC,EAAU9C,uBAAY,WAC1B,GAAK4C,EAAUG,QAAf,CAGA,IACMC,EAD4BJ,EAAUG,QACrBE,WAAW,MAClC,GAAID,EAAS,CAEX,IAAME,EAAY,IAAIC,MACtBD,EAAUrB,IAAMa,EAAcA,EAAcU,OAAS,GACrDC,QAAQC,IAAIJ,GACZA,EAAUxC,iBAAiB,QAAQ,WACjCsC,EAAQO,UAAUL,EAAW,EAAG,UAGnC,CAACR,IACEc,EAAS,SAAC,GAAoC,IAAlCrE,EAAiC,EAAjCA,MAAOI,EAA0B,EAA1BA,OAA0B,EAIbE,oBAAS,GAJI,mBAI1CgE,EAJ0C,KAI9BC,EAJ8B,OAOPjE,wBACxCkE,GAR+C,mBAO1CC,EAP0C,KAO3BC,EAP2B,OAc9BpE,mBAAmB,CAAC,MAAO,WAAvCqE,EAd0C,sBAePrE,oBAAS,GAfF,mBAe1CsE,EAf0C,KAe3BC,EAf2B,KAgB3CC,EAAejE,uBAAY,YAAgB,IAAD,mBAAVkE,GAAU,WAE1BF,EAAX,WAATE,KACC,IAnB8C,EAsBPzE,oBAAS,GAtBF,mBAsB1C0E,EAtB0C,KAsB3BC,EAtB2B,OAwBf3E,mBAAS,GAxBM,mBAwB1C4E,EAxB0C,KAwB/BC,EAxB+B,OA0BX7E,mBAAS,SA1BE,mBA0B1C8E,EA1B0C,KA0B7BC,EA1B6B,OA2B9B/E,mBAAmB,CAAC,QAAS,MAAO,SAAU,SAA1DgF,EA3B0C,oBA8B3CC,EAAU7B,iBAAsB,MAChC8B,EAAU9B,iBAAsB,MA/BW,EAqCzBpD,oBAAU,GArCe,mBAqC1CmF,EArC0C,KAqCpCC,EArCoC,OC5C5B,WAAO,IAAD,EACKpF,oBAAS,GADd,mBACtBqF,EADsB,KACXC,EADW,KA2D7B,MAAO,CACLC,WA1DiB,kBAAMD,GAAa,IA2DpCE,YA1DkB,kBAAMF,GAAa,IA2DrCG,aA1DmB,SAAC,GASF,IARlB/F,EAQiB,EARjBA,MACAI,EAOiB,EAPjBA,OACAd,EAMiB,EANjBA,GACA0G,EAKiB,EALjBA,MACAC,EAIiB,EAJjBA,QACAC,EAGiB,EAHjBA,OACAC,EAEiB,EAFjBA,QACAC,EACiB,EADjBA,QAEMzE,EAASC,mBACb,iBAAO,CACL5B,MAAOA,EACPI,OAAQA,EACRiG,QAAS,QACTxE,KAAK,eAAD,OAAiB7B,EAAQ,EAAzB,OACJ8B,IAAI,eAAD,OAAiB1B,EAAjB,OACH4B,OAAQ,IACRsE,aAAc,KAEhB,CAACtG,EAAOI,IAcV,OACE,oCACGuF,GACC,yBAAKrG,GAAIA,EAAI2C,MAAON,GAClB,kBAAC,SAAD,CACEqE,MAAOA,EACPC,QAASA,EACTM,KAlBS,WACjB,GAAKL,EACL,OACE,yBACExD,IAAK8D,MAAQ,KAAeN,GAC5BlG,MAAM,KACNI,OAAO,KACPqG,IAAI,QAWMC,GACNC,QAAS,CACP,kBAAC,SAAD,CAAQvD,QAASgD,GAAjB,gBACA,kBAAC,SAAD,CAAQQ,MAAM,OAAOxD,QAAS+C,GAA9B,uBDoCsCU,GAA1ChB,EAxCyC,EAwCzCA,WAAYC,EAxC6B,EAwC7BA,YAAaC,EAxCgB,EAwChBA,aAxCgB,EAyCDzF,oBAAS,GAzCR,oBAyC1CwG,GAzC0C,MAyCvBC,GAzCuB,MA2CjDzF,oBAAUwF,GAAoBjB,EAAaC,EAAa,CACtDgB,KAEF,IAAME,GAAmBnG,uBAAY,WACnCkG,IAAmB,KAClB,IAKGE,GAAYpG,uBAChB,SAACqG,EAAiBC,GAChB,IAAMC,EAA4B,QAAhBD,EAAwBD,EAAGG,UAAYH,EAAGI,WAC5D,OAAwB,OAApBJ,EAAGK,aACEH,EAGPA,EAAYH,GAAUC,EAAGK,aAA6BJ,KAG1D,IAIIK,GAAiB3G,uBACrB,SAAC4G,GACC,GAAKhE,EAAUG,QAAf,CAGA,IAAM8D,EAA4BjE,EAAUG,QAK5C,MAAO,CAAE7D,EAFC0H,EAAME,MAAQV,GAAUS,EAAQ,QAE9BvH,EADFsH,EAAMG,MAAQX,GAAUS,EAAQ,WAG5C,CAACT,KAIGY,GAAW,SACfC,EACAC,GAEA,GAAKtE,EAAUG,QAAf,CAGA,IACMC,EAD4BJ,EAAUG,QACrBE,WAAW,MAC9BD,IACFA,EAAQuB,YAAcA,EACtBvB,EAAQmE,SAAW,QACnBnE,EAAQqB,UAAYA,EAEpBrB,EAAQoE,YACRpE,EAAQqE,OAAOJ,EAAsB/H,EAAG+H,EAAsB3H,GAC9D0D,EAAQsE,OAAOJ,EAAiBhI,EAAGgI,EAAiB5H,GACpD0D,EAAQuE,YAERvE,EAAQwE,YAKNC,GAAWzH,uBAAY,SAACd,EAAGI,EAAGoI,EAAQC,EAAKC,GAC/C,IAAIC,EAAYH,EAASE,EACrBE,EAAaC,KAAKC,KAAKN,EAASA,EAASG,EAAYA,GAErDI,EAAO/I,EAAI2I,EACXK,EAAO5I,EAAIwI,EAEXK,EAAS,EAAIN,EACbO,EAAU,EAAIN,EAEdF,GAAaF,IACfC,EAAIU,UAAUJ,EAAMC,EAAMC,EAAQC,GAElCX,GAASvI,EAAGI,EAAGoI,EAAQC,EADvBC,GAAa,MAGd,IAGGS,GAAYrI,uBAChB,YAAgD,IAA7Cd,EAA4C,EAA5CA,EAAGI,EAAyC,EAAzCA,EAAGH,EAAsC,EAAtCA,MAAOI,EAA+B,EAA/BA,OACd,GAAKqD,EAAUG,QAAf,CAGA,IACMC,EAD4BJ,EAAUG,QACrBE,WAAW,MAC9BD,GACFA,EAAQqF,UAAUnJ,EAAGI,EAAGH,EAAOI,MAGnC,IAII+I,GAActI,uBAClB,YAAmC,IAAhCd,EAA+B,EAA/BA,EAAGI,EAA4B,EAA5BA,EAAGiJ,EAAyB,EAAzBA,EACP,GAAK3F,EAAUG,QAAf,CAGA,IACMC,EAD4BJ,EAAUG,QACrBE,WAAW,MAClC,GAAID,EAAS,CAEXyE,GAASvI,EAAGI,EAAGiJ,EAAGvF,EADF,OAIpB,CAACyE,KAIGe,GAAaxI,uBAAY,SAAC4G,GAC9B,IAAM6B,EAAc9B,GAAeC,GAC/B6B,IACF/E,GAAc,GACdG,EAAiB4E,MAElB,IAGGC,GAAQ1I,uBACZ,SAAC4G,GACC,GAAInD,EAAY,CACd,IAAMyD,EAAmBP,GAAeC,GACxC,GAAIhD,GAAiBsD,EACnB,GAAInD,EAAe,CACjB,IAAM4E,EAAOC,OAAOvE,EAAY,GAChCiE,GAAY,CACVpJ,EAAGgI,EAAiBhI,EACpBI,EAAG4H,EAAiB5H,EACpBiJ,EAAGI,SAGL3B,GAASpD,EAAesD,GACxBrD,EAAiBqD,MAKzB,CACEzD,EACAM,EACAH,EACAS,EACA2C,GACAsB,KAKEO,GAAe7I,uBAAY,WAE/B,GADA6E,EAAQD,EAAO,GACVhC,EAAUG,QAAf,CAGA,IAAM8D,EAA4BjE,EAAUG,QAI5C,GAHAL,EAAcoG,KAAKjC,EAAOkC,aAC1BpG,EAAiBD,GAEZgC,EAAQ3B,SAAY4B,EAAQ5B,QAAjC,CAGA,IAAMiG,EAAsBtE,EAAQ3B,QAC9BkG,EAAsBtE,EAAQ5B,QACpCiG,EAAKE,UAAUC,IAAI,UACnBF,EAAKC,UAAUE,OAAO,cACrB,CAACxE,EAAMlC,IAGJ2G,GAAYrJ,uBAAY,WAC5B0D,GAAc,GACdG,OAAiBF,GACjBkF,OACC,CAACA,KAEES,GAActJ,uBAAY,WAC9B0D,GAAc,GACdG,OAAiBF,KAChB,IAEHlD,qBAAU,WACR,GAAKmC,EAAUG,QAAf,CAGA,IAAM8D,EAA4BjE,EAAUG,QAS5C,OAPA8D,EAAOnG,iBAAiB,YAAa8H,IAErC3B,EAAOnG,iBAAiB,YAAagI,IAErC7B,EAAOnG,iBAAiB,UAAW2I,IAEnCxC,EAAOnG,iBAAiB,aAAc4I,IAC/B,WACLzC,EAAOlG,oBAAoB,YAAa6H,IACxC3B,EAAOlG,oBAAoB,YAAa+H,IACxC7B,EAAOlG,oBAAoB,UAAW0I,IACtCxC,EAAOlG,oBAAoB,aAAc2I,QAE1C,CAACd,GAAYE,GAAOW,GAAWC,KAKlC,IAAMC,GAAmBvJ,uBAAY,WACnCoE,GAAkBD,GAClBd,QAAQC,IAAIa,KACX,CAACA,IAGEqF,GAAgBxJ,uBAAY,SAACyJ,GACjCnF,EAAamF,EAAErJ,OAAOsJ,SACrB,IAGGC,GAAgB3J,uBAAY,SAACyJ,EAAGG,EAAU7D,GAC9CvB,EAAeuB,KACd,IAGG8D,GAAiB7J,uBAAY,SAACyJ,GAClCjF,EAAeiF,EAAErJ,OAAOsJ,SACvB,IAGGI,GAAa9J,uBAAY,WAC7B,GAAK4C,EAAUG,QAAf,CAGA,IAAM8D,EAA4BjE,EAAUG,QACtCC,EAAU6D,EAAO5D,WAAW,MAClC,GAAID,EAAS,CAEX,IAAM+G,EAAqB/G,EAAQgH,yBAEnChH,EAAQgH,yBAA2B,mBACnChH,EAAQiH,UAAY,OACpBjH,EAAQkH,SAAS,EAAG,EAAG/K,EAAOI,GAC9B,IAAM4K,EAAYtD,EAAOkC,UAAU,aAEnC/F,EAAQoH,aAAapH,EAAQqH,aAAa,EAAG,EAAGlL,EAAOI,GAAS,EAAG,GAEnEyD,EAAQgH,yBAA2BD,EAEnC,IAAMO,EAAI/L,SAASqD,cAAc,KACjCrD,SAASuD,KAAKC,YAAYuI,GAC1BA,EAAEC,KAAOJ,EACT,IAAMK,EAAUC,MAASC,OAAO,qBAChCJ,EAAEK,SAAW,WAAaH,EAC1BF,EAAElK,OAAS,SACXiD,QAAQC,IAAI,cAAgBkH,GAC5BF,EAAEM,YAEH,CAACzL,EAAOI,IAGLsL,GAAe7K,uBACnB,SAACkC,GACC,GAAKU,EAAUG,SAAY2B,EAAQ3B,SAAY4B,EAAQ5B,QAAvD,CAGA,IACMC,EAD4BJ,EAAUG,QACrBE,WAAW,MAC5B+F,EAAsBtE,EAAQ3B,QAC9BkG,EAAsBtE,EAAQ5B,QACpC,GAAIC,EAAS,CACX,IAAI8H,GAAe,EACnB,GAAa,SAAT5I,GAAmB0C,GAAQ,EAC7BkG,EAAclG,EAAO,EACrBqE,EAAKC,UAAUC,IAAI,UACf2B,EAAc,GAChB9B,EAAKE,UAAUE,OAAO,cAEnB,MAAa,SAATlH,GAAmB0C,EAAOlC,EAAcU,OAAS,GAO1D,OANA0H,EAAclG,EAAO,EACrBoE,EAAKE,UAAUC,IAAI,UACf2B,IAAgBpI,EAAcU,OAAS,GACzC6F,EAAKC,UAAUE,OAAO,UAK1BpG,EAAQqF,UAAU,EAAG,EAAGlJ,EAAOI,GAC/B,IAAM2D,EAAY,IAAIC,MACtBD,EAAUrB,IAAMa,EAAcoI,GAC9B5H,EAAUxC,iBAAiB,QAAQ,WACjCsC,EAAQO,UAAUL,EAAW,EAAG,MAElC2B,EAAQiG,OAGZ,CAACvL,EAAQJ,EAAOyF,EAAMlC,IAIlBqI,GAAmB/K,uBACvB,SAACyJ,GAUC,GATApB,GAAU,CACRnJ,EAAG,EACHI,EAAG,EACHH,QACAI,WAEFoD,EAAiB,IACjBkC,GAAS,GACTsB,KACKzB,EAAQ3B,SAAY4B,EAAQ5B,QAAjC,CAGA,IAAMiG,EAAsBtE,EAAQ3B,QAC9BiI,EAAoBrG,EAAQ5B,QAClCiG,EAAKE,UAAUE,OAAO,UACtB4B,EAAG9B,UAAUE,OAAO,aAEtB,CAACjD,GAAkBkC,GAAWlJ,EAAOI,IAIjC0L,GAAiBjL,uBACrB,SAACqG,EAAI6E,GACH,OAAQA,GACN,IAAK,SACHhF,IAAmB,GACnB,MACF,IAAK,OACH4D,KACA,MACF,IAAK,YACHe,GAAa,QACb,MACF,IAAK,YACHA,GAAa,WAInB,CAACE,GAAkBjB,GAAYe,KAGjC,OACE,oCACE,4BAAQxI,IAAKO,EAAWrD,OAAQA,EAAQJ,MAAOA,IAC/C,yBACEV,GAAG,eACH2C,MACE,CACEqE,aAActB,EAAgB,KAAO,IAIzC,kBAAC,EAAD,CACEjC,KAAMiC,EAAgB,iBAAmB,eACzC/C,MAAO,CACLjC,MAAO,OACPgM,SAAU,IAEZ/I,WAAYmH,MAGhB,kBAAC6B,EAAA,EAAD,CACEC,GAAIlH,EACJmH,QAAS,IACTC,WAAW,UACXC,eAAa,GAEb,yBAAK/M,GAAG,WACN,yCACA,yBAAKwD,UAAU,WAzXJ,CAAC,OAAQ,SAAU,YAAa,aA0X7BwJ,KAAI,SAACC,EAAQC,GACvB,OACE,kBAAC,EAAD,CACExJ,OACa,cAAXuJ,EACIhH,EACW,cAAXgH,EACA/G,OACAhB,EAENiI,IAAKD,EAAQD,EACbxJ,KAAM,QAAUwJ,EAChBzJ,UAAWyJ,EACXtK,MAAO,CAAE+J,SAAU,IACnB/I,WAAY,SAACiE,GAAD,OAAQ4E,GAAe5E,EAAIqF,UAK/C,yCACA,yBAAKzJ,UAAU,SACZ6B,EAAS2H,KAAI,SAACvH,EAAMyH,GACnB,OACE,kBAAC,EAAD,CACEC,IAAKD,EAAQzH,EACbjC,UACW,WAATiC,EACIH,EACE,SACA,GACDA,EAED,GADA,SAGN7B,KAAM,QAAUgC,EAChB9C,MAAO,CAAE+J,SAAU,IACnB/I,WAAY,SAACqH,GAAD,OAAOxF,EAAa,CAACwF,EAAGvF,WAK5C,yBAAKjC,UAAU,SACb,2BACEb,MACE,CACEyK,gBAAiB9H,EAAgB,UAAYQ,GAGjDrC,KAAK,QACLzD,GAAG,QACHqN,KAAK,QACLC,IAAI,IACJC,IAAI,KACJtC,MAAOrF,EACP4H,SAAUzC,MAGd,wBAAIvH,UAAU,UACXwC,EAASgH,KAAI,SAAC1F,EAAO4F,GACpB,OACE,wBACEC,IAAKD,EAAQ5F,EACb9D,UACE8D,IAAUxB,EAAcwB,EAAQ,UAAYA,EAE9CxD,QAAS,SAACkH,GAAD,OAAOE,GAAcF,EAAG,KAAM1D,SAI7C,2BACE7D,KAAK,QACLwH,MAAOnF,EACP0H,SAAUpC,GACVpL,GAAG,oBAKX,kBAACyG,EAAD,CACE/F,MAAO,IACPI,OAAQ,IACRd,GAAG,eACH0G,MAAM,qEACNC,QAAQ,+DACRC,OAAQ,cACRC,QAASyF,GACTxF,QAASY,OAUjB,OAJA3C,EAAO0I,aAAe,CACpB/M,MAAOC,OAAOC,WACdE,OAAQH,OAAOI,aAEV,CACLgE,SACAd,gBACAC,mBACAG,aEpjBSqJ,EAAa,WAAO,IAAD,ECHR,WAAO,IAAD,EACM1M,oBAAS,GADf,mBACrBqF,EADqB,KACVC,EADU,KAOtBqH,EAAQ,WACZrH,GAAa,GACb1B,QAAQC,IAAI,iBAyBd,MAAO,CACL+I,KAhCW,WACXtH,GAAa,GACb1B,QAAQC,IAAI,gBA+BZ8I,QACAE,YAzBkB,SAAC,GAAD,IAClBnO,EADkB,EAClBA,SACAE,EAFkB,EAElBA,KAFkB,OAalB,oCACGyG,GACC,kBAAC,EAAD,CAAOzG,KAAMA,EAAMkO,WAAYH,GAC5BjO,MDxB4BqO,GAA7BH,EADsB,EACtBA,KAAMD,EADgB,EAChBA,MAAOE,EADS,EACTA,YADS,EAE+B7J,IAArDe,EAFsB,EAEtBA,OAAQd,EAFc,EAEdA,cAAeC,EAFD,EAECA,iBAAkBG,EAFnB,EAEmBA,QA0EjD,MAAO,CACL2J,QA1Ec,WAAO,IAAD,EAMhBC,qBAAWC,GANK,mBAElBC,EAFkB,KAGlBC,EAHkB,KAIlBC,EAJkB,KAKlBC,EALkB,OAOMtN,mBAAS,CAAEN,MAAO,KAAMI,OAAQ,MAPtC,mBAOb6B,EAPa,KAON4L,EAPM,OAQkBvN,oBAAS,GAR3B,mBAQbwN,EARa,KAQCC,EARD,KAWpBzM,oBAAUmM,EAAc1K,KAAOmK,EAAOD,EAAO,CAACQ,IAG9C,IAAMO,EAAgBnN,uBAAY,WAE9BgN,EADEC,EACO,CAAE9N,MAAO,KAAMI,OAAQ,KAEvB,CAAEJ,OAAQ,EAAGI,QAAS,IAEjC2N,GAAeD,KAEd,CAACA,IAEJ,OACE,kBAACX,EAAD,CACEjO,KAAM,CACJc,MAAOiC,EAAMjC,MACbI,OAAQ6B,EAAM7B,OACdd,GAAI,cACJE,OAAQ,cACRuC,OAAQ4L,IAGV,yBAAK7K,UAAU,mBACb,kBAAC,WAAD,CACEmL,UAAQ,EACR3O,GAAG,cACHwO,aAAcA,EACdI,aAAc,WACZjB,IACAS,EAAe,2BAAKD,GAAN,IAAqB1K,MAAM,KAEzCS,EAAiB,KAEnB2K,gBAAiB,WACfP,GAAe,GACf1J,QAAQC,IAAI,OACZD,QAAQC,IAAIZ,IAGd6K,gBAAiB,WACfJ,IACA9J,QAAQC,IAAIZ,IAEd8K,cAAe,WACbL,IACAM,YAAW,WACT3K,MACC,OAGP,kBAACU,EAAD,CACEjE,OAEE0N,EAAe1O,SAASuD,KAAK4L,aAAe,IAAMtM,EAAM7B,OAE1DJ,MAAO8N,EAAe1O,SAASuD,KAAK6L,YAAcvM,EAAMjC,WAQhE2D,YEvES6J,G,OAAgBiB,wBAAmB,KAOnCC,EAAS,WAAM,MAEG1B,IAArBM,EAFkB,EAElBA,QAAS3J,EAFS,EAETA,QAFS,EAIHrD,mBAAS,IAAzBqO,EAJmB,oBAMpBC,EAAYlL,iBAAuB,MANf,EAQPpD,mBAAmB,CACpC,aACA,gBACA,aACA,cACA,eACA,iBACA,gBAPKuO,EARmB,sBAkBPvO,mBAAS,GAArBwO,EAlBmB,sBAqBcxO,mBAAoB,CAC1DyC,MAAM,EACNyJ,MAAO,IAvBiB,mBAqBnBiB,EArBmB,KAqBJC,EArBI,OA2BcpN,oBAAS,GA3BvB,mBA2BnBqN,EA3BmB,KA2BJC,EA3BI,KA8BpBmB,EAAkBlO,uBACtB,SAACqG,EAAiBC,GAChB,IAAMF,EAA4B,QAAhBE,EAAwBD,EAAGG,UAAYH,EAAGI,WAC5D,OAAwB,OAApBJ,EAAGK,aACEN,EAGPA,EAAY8H,EAAgB7H,EAAGK,aAA6BJ,KAGhE,IAII6H,EAAanO,uBAAY,WAC7B,GAAK+N,EAAUhL,QAAf,CAGAM,QAAQC,IAAI,SAEZ,IADA,IAAM8K,EAAUL,EAAUhL,QAAQsL,WACzBC,EAAI,EAAGA,EAAIF,EAAQhL,OAAQkL,IAAK,CACvC,IAAMC,EAAMH,EAAQE,GACpBC,EAAInN,MAAMjC,MAAQoP,EAAInN,MAAM7B,OAASuO,EAAe,SAErD,CAACA,IAQEU,EAAYxO,uBAChB,YAA2B,IAAxBC,EAAuB,EAAvBA,QAASC,EAAc,EAAdA,QACV,GAAK6N,EAAUhL,QAIf,IADA,IAAMqL,EAAUL,EAAUhL,QAAQsL,WACzBC,EAAI,EAAGA,EAAIF,EAAQhL,OAAQkL,IAAK,CACvC,IAAMC,EAAMH,EAAQE,GAEdpP,EAAIqP,EAAI9H,WAAa8H,EAAIlO,YAAc,EAAIJ,EAE3CX,EACJiP,EAAI/H,UACJ+H,EAAIjO,aAAe,EACnB4N,EAAgBH,EAAUhL,QAAS,OACnC7C,EACEuO,EACF,EAAI1G,KAAKC,KAAK9I,EAAIA,EAAII,EAAIA,IAAM8O,EAAQhL,OAAS0K,GAC/CW,EAAW,KACbA,EAAW,IAEbF,EAAInN,MAAMjC,MAAQoP,EAAInN,MAAM7B,OAC1BuO,EAAeG,EAAWQ,EAAW,QAG3C,CAACP,EAAiBJ,EAAcG,IAG5BS,EAAgB1O,uBACpB,SAAC2O,EAAMhD,GACL,GAAKoC,EAAUhL,QAMf,OAAQ4L,GACN,IAAK,cACH,OAAK/B,EAAc1K,MAOd4K,GACHW,YAAW,WAGT3K,MACC,SAGLiK,GAAgBD,SAbdD,EAAe,CAAE3K,MAAO0K,EAAc1K,KAAMyJ,aAiBpD,CAACiB,EAAeE,IAsClB,OAlCArM,qBAAU,WACR0N,MACC,CAACA,IAGJ1N,qBAAU,WACR,GAAKsN,EAAUhL,QAAf,CAGA,IAAMqL,EAAUL,EAAUhL,QAAQsL,WAClC,CAACzB,GAAegC,SAAQ,SAACD,GACvB,GAAIA,EAAKhD,MAAO,CACd,IAAM4C,EAAMH,EAAQO,EAAKhD,OACxBgD,EAAKzM,KAEFqM,EAAIrF,UAAUC,IAAI,UADlBoF,EAAIrF,UAAUE,OAAO,iBAI5B,CAACwD,IAGJnM,qBAAU,WACR,GAAKsN,EAAUhL,QAAf,CAGA,IAAM8L,EAAyBd,EAAUhL,QAGzC,OAFA8L,EAAOnO,iBAAiB,YAAa8N,GACrCK,EAAOnO,iBAAiB,aAAcyN,GAC/B,WACLU,EAAOlO,oBAAoB,YAAa6N,GACxCK,EAAOlO,oBAAoB,aAAcwN,OAE1C,CAACK,EAAWL,IAGb,oCACE,kBAACxB,EAAcmC,SAAf,CACEpF,MAAO,CAACkD,EAAeC,EAAgBC,EAAeC,IAEtD,kBAACN,EAAD,OAEF,4BAAQhO,GAAG,aACT,yBAAK4D,IAAK0L,EAAW3M,MAAO,CAAE7B,OAAQuO,EAAe,IAAMrP,GAAG,UAC3DuP,EAASvC,KAAI,SAACkD,EAAMhD,GACnB,OACE,yBACE1J,UAEY,IAAV0J,GAAeiB,EAAc1K,KACzB,kBACA,WAENd,MACE,CACE2N,gBACE,OAASpJ,MAAQ,KAAegJ,GAAQ,IAC1CK,mBAAoB,SACpBC,eAAgB,QAChBC,iBAAkB,aAGtBtD,IAAKD,EAAQgD,EACbpM,QAAS,kBAAMmM,EAAcC,EAAMhD,a,OC7LpCwD,MAVf,WACE,OACE,yBAAKlN,UAAU,OAEb,yBAAKxD,GAAG,cACR,kBAAC,EAAD,QCDc2Q,QACW,cAA7BhQ,OAAOiQ,SAASC,UAEe,UAA7BlQ,OAAOiQ,SAASC,UAEhBlQ,OAAOiQ,SAASC,SAASC,MACvB,2DCZN9N,IAAS+N,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,OAEFlR,SAASC,eAAe,SDiIpB,kBAAmBkR,WACrBA,UAAUC,cAAcC,MACrBC,MAAK,SAAAC,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACL5M,QAAQ4M,MAAMA,EAAM7K,a,mBEjJ5B,IAAIqG,EAAM,CACT,mBAAoB,IACpB,eAAgB,IAChB,gBAAiB,IACjB,eAAgB,IAChB,kBAAmB,IACnB,gBAAiB,IACjB,iBAAkB,IAClB,cAAe,IACf,kBAAmB,IACnB,wBAAyB,KAI1B,SAASyE,EAAeC,GACvB,IAAI1R,EAAK2R,EAAsBD,GAC/B,OAAOE,EAAoB5R,GAE5B,SAAS2R,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAE7E,EAAK0E,GAAM,CACpC,IAAI1G,EAAI,IAAI8G,MAAM,uBAAyBJ,EAAM,KAEjD,MADA1G,EAAE+G,KAAO,mBACH/G,EAEP,OAAOgC,EAAI0E,GAEZD,EAAeO,KAAO,WACrB,OAAOC,OAAOD,KAAKhF,IAEpByE,EAAeS,QAAUP,EACzBpS,EAAOC,QAAUiS,EACjBA,EAAezR,GAAK,I","file":"static/js/main.a08def72.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/Calculator.bb9998c1.png\";","module.exports = __webpack_public_path__ + \"static/media/Chrome.44b3c5fc.png\";","module.exports = __webpack_public_path__ + \"static/media/Drawing.336727e0.png\";","module.exports = __webpack_public_path__ + \"static/media/Finder.e7ddfa6b.png\";","module.exports = __webpack_public_path__ + \"static/media/Launchpad.dab98b41.png\";","module.exports = __webpack_public_path__ + \"static/media/PrefApp.64914db7.png\";","module.exports = __webpack_public_path__ + \"static/media/Terminal.148e3c64.png\";","module.exports = __webpack_public_path__ + \"static/media/gougu.e314cff8.jpg\";","module.exports = __webpack_public_path__ + \"static/media/wallpaper.f9f13a3a.jpg\";","module.exports = __webpack_public_path__ + \"static/media/wallpaper_small.2863d56b.jpg\";","import React, {\n  useState,\n  useCallback,\n  useMemo,\n  useEffect,\n  CSSProperties,\n} from \"react\";\n\ntype Props = {\n  children: React.ReactChild;\n  domEl: HTMLDivElement;\n  data: {\n    width: number;\n    height: number;\n    id: string;\n    moveId: string;\n    isShow: boolean;\n  };\n};\n/**\n * 父元素需要传值\n * {\n    children，\n    domEl：（Modal主体dom），\n    data：{\n      width；height；\n      id：主体dom（Drawing）；\n      moveId：可拖拽部分（TitleBar）;\n      isshow：是否显示\n    }\n  }\n */\nconst Draggable = ({ children, domEl, data }: Props) => {\n  const dragEl = document.getElementById(data.id) as HTMLDivElement;\n  const moveEl = document.getElementById(data.moveId) as HTMLDivElement;\n  const localPosition = localStorage.getItem(data.id) || null;\n  const initPosition = localPosition\n    ? JSON.parse(localPosition)\n    : {\n        x: data.width === -1 ? 0 : (window.innerWidth - data.width) / 2,\n        y: data.height === -1 ? 0 : (window.innerHeight - data.height) / 2,\n      };\n  // console.log(initPosition);\n  const [state, setState] = useState({\n    isDragging: false,\n    origin: { x: 0, y: 0 },\n    position: initPosition,\n  });\n\n  const handleMouseDown = useCallback(({ clientX, clientY }) => {\n    setState((state) => ({\n      ...state,\n      isDragging: true,\n      // 点击处距离 draggle 边框的距离\n      origin: {\n        x: clientX - state.position.x,\n        y: clientY - state.position.y,\n      },\n    }));\n  }, []);\n\n  // 拖拽事件\n  const handleMouseMove = useCallback(\n    // 边框不出浏览器\n    ({ clientX, clientY, target }) => {\n      if (!state.isDragging || (moveEl && target !== moveEl)) return;\n      let x = clientX - state.origin.x;\n      let y = clientY - state.origin.y;\n      if (x <= 0) {\n        x = 0;\n      } else if (x > window.innerWidth - dragEl.offsetWidth) {\n        x = window.innerWidth - dragEl.offsetWidth;\n      }\n      if (y <= 0) {\n        y = 0;\n      } else if (y > window.innerHeight - dragEl.offsetHeight) {\n        y = window.innerHeight - dragEl.offsetHeight;\n      }\n      const newPosition = { x, y };\n      setState((state) => ({\n        ...state,\n        position: newPosition,\n      }));\n    },\n    [state.isDragging, state.origin, moveEl, dragEl]\n  );\n\n  const handleMouseUp = useCallback(() => {\n    if (state.isDragging) {\n      setState((state) => ({\n        ...state,\n        isDragging: false,\n      }));\n    }\n  }, [state.isDragging]);\n\n  // 全屏\n  useEffect(() => {\n    if (data.width === -1) {\n      setState({\n        isDragging: false,\n        origin: { x: 0, y: 0 },\n        position: { x: 0, y: 0 },\n      });\n    }\n  }, [data.width]);\n\n  useEffect(() => {\n    if (!domEl) return;\n    domEl.addEventListener(\"mousemove\", handleMouseMove);\n    domEl.addEventListener(\"mouseup\", handleMouseUp);\n    return () => {\n      domEl.removeEventListener(\"mousemove\", handleMouseMove);\n      domEl.removeEventListener(\"mouseup\", handleMouseUp);\n      if (data.width !== -1) {\n        localStorage.setItem(data.id, JSON.stringify(state.position));\n      }\n    };\n  }, [\n    domEl,\n    handleMouseMove,\n    handleMouseUp,\n    data.id,\n    data.width,\n    state.position,\n  ]);\n\n  const styles = useMemo(\n    () => ({\n      left: `${state.position.x}px`,\n      top: data.isShow ? `${state.position.y}px` : \"-2000px\",\n      // top: `${state.position.y}px`,\n      zIndex: state.isDragging ? 2 : 1,\n      // 最小化 none，是不是画布就清除了？\n      // display: data.isShow ? \"block\" : \"none\",\n      position: \"absolute\",\n    }),\n    [state.isDragging, state.position, data.isShow]\n  );\n\n  return (\n    <div\n      id={data.id}\n      style={styles as CSSProperties}\n      onMouseDown={handleMouseDown}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default Draggable;\n","import ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport Draggable from \"./draggable/index\";\n\ntype Props = {\n  children: React.ReactChild;\n  closeModal?: () => void;\n  data: {\n    width: number;\n    height: number;\n    id: string;\n    moveId: string;\n    isShow: boolean;\n  };\n};\n\n/**\n * 父元素需要传值\n * {\n    children,\n    closeModal,\n    data：{\n      width;height;\n      id：主体dom（Drawing）;\n      moveId：可拖拽部分（TitleBar）;\n      isshow：是否显示\n    }\n  }\n */\n\nconst Modal = React.memo(({ children, data }: Props) => {\n  const domEl = document.getElementById(\"main-view\") as HTMLDivElement;\n  if (!domEl) return null;\n\n  // Portal 弹窗\n  return ReactDOM.createPortal(\n    <Draggable domEl={domEl} data={data}>\n      {children}\n    </Draggable>,\n    domEl\n  );\n});\n\nexport default Modal;\n","import React, { CSSProperties, RefObject } from \"react\";\nimport \"./index.scss\";\n\nconst scriptElem = document.createElement(\"script\");\nscriptElem.src = \"//at.alicdn.com/t/font_1919988_ame0oy3sn99.js\";\ndocument.body.appendChild(scriptElem);\n\ninterface PropsTypes {\n  className?: string;\n  type: string;\n  style?: object;\n  svgRef?: RefObject<SVGSVGElement>;\n  clickEvent?: (T: any) => void;\n}\n\nexport const Iconfont = ({\n  className,\n  type,\n  style,\n  svgRef,\n  clickEvent,\n}: PropsTypes) => {\n  return (\n    <svg\n      ref={svgRef}\n      className={className ? \"icon-font \" + className : \"icon-font\"}\n      aria-hidden=\"true\"\n      style={style as CSSProperties}\n      onClick={clickEvent}\n    >\n      <use xlinkHref={`#${type}`} />\n    </svg>\n  );\n};\n","import React, {\n  useState,\n  useEffect,\n  useCallback,\n  useRef,\n  CSSProperties,\n} from \"react\";\nimport moment from \"moment\";\nimport { Iconfont } from \"../iconfont\";\nimport { CSSTransition } from \"react-transition-group\";\n// 弹出框\nimport { useDialog } from \"../dialog/index\";\nimport \"./canvas.scss\";\n\n// canvans props\ninterface CanvasProps {\n  width: number;\n  height: number;\n}\n\n// 鼠标位置\ntype Coordinate = {\n  x: number;\n  y: number;\n};\n\n// 清除圆形区域\ninterface ClearArcOptions {\n  x: number;\n  y: number;\n  r: number;\n}\n\n// 清除矩形区域\ninterface ClearRectOptions {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport const UseCanvas = () => {\n  const [canvasHistory, setCanvasHistory] = useState<string[]>([]);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const loadPic = useCallback(() => {\n    if (!canvasRef.current) {\n      return;\n    }\n    const canvas: HTMLCanvasElement = canvasRef.current;\n    const context = canvas.getContext(\"2d\");\n    if (context) {\n      // context.clearRect(0, 0, canvas.width, canvas.height);\n      const canvasPic = new Image();\n      canvasPic.src = canvasHistory[canvasHistory.length - 1];\n      console.log(canvasPic);\n      canvasPic.addEventListener(\"load\", () => {\n        context.drawImage(canvasPic, 0, 0);\n      });\n    }\n  }, [canvasHistory]);\n  const Canvas = ({ width, height }: CanvasProps) => {\n    //--------------------- Canvas 画板 State -----------------\n\n    // 是否在画\n    const [isPainting, setIsPainting] = useState(false);\n\n    // 鼠标位置 （规定好，或 undefined）\n    const [mousePosition, setMousePosition] = useState<Coordinate | undefined>(\n      undefined\n    );\n\n    //--------------------- tools 工具栏 State -----------------\n\n    // tools 画笔/橡皮 选择\n    const [toolsMap] = useState<string[]>([\"pen\", \"eraser\"]);\n    const [eraserEnabled, setEraserEnabled] = useState(false);\n    const onToolsClick = useCallback(([e, tool]) => {\n      // 这里逻辑不同，后续查看\n      tool === \"eraser\" ? setEraserEnabled(true) : setEraserEnabled(false);\n    }, []);\n\n    // 画板开关状态\n    const [isToolboxOpen, setIsToolboxOpen] = useState(true);\n    // 画笔 宽度\n    const [lineWidth, setLineWidth] = useState(5);\n    // 画笔 颜色\n    const [strokeStyle, setStrokeStyle] = useState(\"black\");\n    const [colorMap] = useState<string[]>([\"black\", \"red\", \"yellow\", \"blue\"]);\n\n    // back,next\n    const backRef = useRef<SVGSVGElement>(null);\n    const nextRef = useRef<SVGSVGElement>(null);\n\n    // 保存，删除，前进，后退\n    const optionsMap = [\"save\", \"delete\", \"turn_back\", \"turn_next\"];\n\n    // 前进，后退步数\n    const [step, setStep] = useState(-1);\n\n    // ------------------弹框 modal-----------------------\n    const { openDialog, closeDialog, RenderDialog } = useDialog();\n    const [isClearDialogOpen, setClearDialogOpen] = useState(false);\n    // 控制弹框\n    useEffect(isClearDialogOpen ? openDialog : closeDialog, [\n      isClearDialogOpen,\n    ]);\n    const closeClearDialog = useCallback(() => {\n      setClearDialogOpen(false);\n    }, []);\n\n    //-------------------- canvas 画板 Function -------------------\n\n    // 获取距离最外层的高度\n    const getOffset = useCallback(\n      (el: HTMLElement, offsetStyle: \"top\" | \"left\"): number => {\n        const OffsetNum = offsetStyle === \"top\" ? el.offsetTop : el.offsetLeft;\n        if (el.offsetParent === null) {\n          return OffsetNum;\n        }\n        return (\n          OffsetNum + getOffset(el.offsetParent as HTMLElement, offsetStyle)\n        );\n      },\n      []\n    );\n\n    // 获取当前鼠标的坐标\n    const getCoordinates = useCallback(\n      (event: MouseEvent): Coordinate | undefined => {\n        if (!canvasRef.current) {\n          return;\n        }\n        const canvas: HTMLCanvasElement = canvasRef.current;\n        // event.offsetX\n        // event.offsetY\n        const x = event.pageX - getOffset(canvas, \"left\");\n        const y = event.pageY - getOffset(canvas, \"top\");\n        return { x, y };\n      },\n      [getOffset]\n    );\n\n    // 鼠标移动，画线函数\n    const drawLine = (\n      originalMousePosition: Coordinate,\n      newMousePosition: Coordinate\n    ) => {\n      if (!canvasRef.current) {\n        return;\n      }\n      const canvas: HTMLCanvasElement = canvasRef.current;\n      const context = canvas.getContext(\"2d\");\n      if (context) {\n        context.strokeStyle = strokeStyle;\n        context.lineJoin = \"round\";\n        context.lineWidth = lineWidth;\n\n        context.beginPath();\n        context.moveTo(originalMousePosition.x, originalMousePosition.y);\n        context.lineTo(newMousePosition.x, newMousePosition.y);\n        context.closePath();\n\n        context.stroke();\n      }\n    };\n\n    // 清除圆形区域\n    const clearArc = useCallback((x, y, radius, ctx, stepClear) => {\n      var calcWidth = radius - stepClear;\n      var calcHeight = Math.sqrt(radius * radius - calcWidth * calcWidth);\n\n      var posX = x - calcWidth;\n      var posY = y - calcHeight;\n\n      var widthX = 2 * calcWidth;\n      var heightY = 2 * calcHeight;\n\n      if (stepClear <= radius) {\n        ctx.clearRect(posX, posY, widthX, heightY);\n        stepClear += 1;\n        clearArc(x, y, radius, ctx, stepClear);\n      }\n    }, []);\n\n    // 清除矩形区域\n    const clearRect = useCallback(\n      ({ x, y, width, height }: ClearRectOptions) => {\n        if (!canvasRef.current) {\n          return;\n        }\n        const canvas: HTMLCanvasElement = canvasRef.current;\n        const context = canvas.getContext(\"2d\");\n        if (context) {\n          context.clearRect(x, y, width, height);\n        }\n      },\n      []\n    );\n\n    // 圆形橡皮 x,y,r\n    const clearArcFun = useCallback(\n      ({ x, y, r }: ClearArcOptions) => {\n        if (!canvasRef.current) {\n          return;\n        }\n        const canvas: HTMLCanvasElement = canvasRef.current;\n        const context = canvas.getContext(\"2d\");\n        if (context) {\n          var stepClear = 1;\n          clearArc(x, y, r, context, stepClear);\n        }\n      },\n      [clearArc]\n    );\n\n    // 修改状态，开始作画\n    const startPaint = useCallback((event: MouseEvent) => {\n      const coordinates = getCoordinates(event);\n      if (coordinates) {\n        setIsPainting(true);\n        setMousePosition(coordinates);\n      }\n    }, []);\n\n    // 作画，并保存 新位置\n    const paint = useCallback(\n      (event: MouseEvent) => {\n        if (isPainting) {\n          const newMousePosition = getCoordinates(event);\n          if (mousePosition && newMousePosition) {\n            if (eraserEnabled) {\n              const newr = Number(lineWidth / 2);\n              clearArcFun({\n                x: newMousePosition.x,\n                y: newMousePosition.y,\n                r: newr,\n              });\n            } else {\n              drawLine(mousePosition, newMousePosition);\n              setMousePosition(newMousePosition);\n            }\n          }\n        }\n      },\n      [\n        isPainting,\n        eraserEnabled,\n        mousePosition,\n        lineWidth,\n        drawLine,\n        clearArcFun,\n      ]\n    );\n\n    // 保存当前画板状态(mouseup & mouseleave)\n    const saveFragment = useCallback(() => {\n      setStep(step + 1);\n      if (!canvasRef.current) {\n        return;\n      }\n      const canvas: HTMLCanvasElement = canvasRef.current;\n      canvasHistory.push(canvas.toDataURL());\n      setCanvasHistory(canvasHistory);\n\n      if (!backRef.current || !nextRef.current) {\n        return;\n      }\n      const back: SVGSVGElement = backRef.current;\n      const next: SVGSVGElement = nextRef.current;\n      back.classList.add(\"active\");\n      next.classList.remove(\"active\");\n    }, [step, canvasHistory]);\n\n    // 修改作画状态\n    const exitPaint = useCallback(() => {\n      setIsPainting(false);\n      setMousePosition(undefined);\n      saveFragment();\n    }, [saveFragment]);\n\n    const leaveCanvas = useCallback(() => {\n      setIsPainting(false);\n      setMousePosition(undefined);\n    }, []);\n\n    useEffect(() => {\n      if (!canvasRef.current) {\n        return;\n      }\n      const canvas: HTMLCanvasElement = canvasRef.current;\n      // 按下鼠标，修改状态，开始作画\n      canvas.addEventListener(\"mousedown\", startPaint);\n      // 鼠标移动，跟踪轨迹\n      canvas.addEventListener(\"mousemove\", paint);\n      // 鼠标松开，停止作画(有保存状态)\n      canvas.addEventListener(\"mouseup\", exitPaint);\n      // 鼠标离开，停止作画(无保存状态)\n      canvas.addEventListener(\"mouseleave\", leaveCanvas);\n      return () => {\n        canvas.removeEventListener(\"mousedown\", startPaint);\n        canvas.removeEventListener(\"mousemove\", paint);\n        canvas.removeEventListener(\"mouseup\", exitPaint);\n        canvas.removeEventListener(\"mouseleave\", leaveCanvas);\n      };\n    }, [startPaint, paint, exitPaint, leaveCanvas]);\n\n    //--------------------- tools 工具栏 Function ----------------\n\n    // 画板开关 点击事件\n    const toolboxOpenClick = useCallback(() => {\n      setIsToolboxOpen(!isToolboxOpen);\n      console.log(isToolboxOpen);\n    }, [isToolboxOpen]);\n\n    // 画笔宽度\n    const onSizesChange = useCallback((e) => {\n      setLineWidth(e.target.value);\n    }, []);\n\n    // 常见颜色选择\n    const onColorsClick = useCallback((e, selector, color) => {\n      setStrokeStyle(color);\n    }, []);\n\n    // 调色盘\n    const onColorsChange = useCallback((e) => {\n      setStrokeStyle(e.target.value);\n    }, []);\n\n    // 保存 canvas\n    const saveCanvas = useCallback(() => {\n      if (!canvasRef.current) {\n        return;\n      }\n      const canvas: HTMLCanvasElement = canvasRef.current;\n      const context = canvas.getContext(\"2d\");\n      if (context) {\n        // 用于记录当前 context.globalCompositeOperation ——（合成或混合模式）\n        const compositeOperation = context.globalCompositeOperation;\n        // 设置为 “在现有的画布内容后面绘制新的图形”\n        context.globalCompositeOperation = \"destination-over\";\n        context.fillStyle = \"#fff\";\n        context.fillRect(0, 0, width, height);\n        const imageData = canvas.toDataURL(\"image/png\");\n        // 将数据从已有的 ImageData 对象绘制到位图\n        context.putImageData(context.getImageData(0, 0, width, height), 0, 0);\n        // 复原 context.globalCompositeOperation\n        context.globalCompositeOperation = compositeOperation;\n        // 下载\n        const a = document.createElement(\"a\");\n        document.body.appendChild(a);\n        a.href = imageData;\n        const dateNow = moment().format(\"YYYY-MM-DD HHmmss\");\n        a.download = \"myPaint \" + dateNow;\n        a.target = \"_blank\";\n        console.log(\"myPainting \" + dateNow);\n        a.click();\n      }\n    }, [width, height]);\n\n    // 后退、前进\n    const changeCanvas = useCallback(\n      (type) => {\n        if (!canvasRef.current || !backRef.current || !nextRef.current) {\n          return;\n        }\n        const canvas: HTMLCanvasElement = canvasRef.current;\n        const context = canvas.getContext(\"2d\");\n        const back: SVGSVGElement = backRef.current;\n        const next: SVGSVGElement = nextRef.current;\n        if (context) {\n          let currentStep = -1;\n          if (type === \"back\" && step >= 0) {\n            currentStep = step - 1;\n            next.classList.add(\"active\");\n            if (currentStep < 0) {\n              back.classList.remove(\"active\");\n            }\n          } else if (type === \"next\" && step < canvasHistory.length - 1) {\n            currentStep = step + 1;\n            back.classList.add(\"active\");\n            if (currentStep === canvasHistory.length - 1) {\n              next.classList.remove(\"active\");\n            }\n          } else {\n            return;\n          }\n          context.clearRect(0, 0, width, height);\n          const canvasPic = new Image();\n          canvasPic.src = canvasHistory[currentStep];\n          canvasPic.addEventListener(\"load\", () => {\n            context.drawImage(canvasPic, 0, 0);\n          });\n          setStep(currentStep);\n        }\n      },\n      [height, width, step, canvasHistory]\n    );\n\n    // 清空画布\n    const checkClearDialog = useCallback(\n      (e) => {\n        clearRect({\n          x: 0,\n          y: 0,\n          width,\n          height,\n        });\n        setCanvasHistory([]);\n        setStep(-1);\n        closeClearDialog();\n        if (!backRef.current || !nextRef.current) {\n          return;\n        }\n        const back: SVGSVGElement = backRef.current;\n        const go: SVGSVGElement = nextRef.current;\n        back.classList.remove(\"active\");\n        go.classList.remove(\"active\");\n      },\n      [closeClearDialog, clearRect, width, height]\n    );\n\n    // 保存、清空、后退、前进\n    const onOptionsClick = useCallback(\n      (el, toolName) => {\n        switch (toolName) {\n          case \"delete\":\n            setClearDialogOpen(true);\n            break;\n          case \"save\":\n            saveCanvas();\n            break;\n          case \"turn_back\":\n            changeCanvas(\"back\");\n            break;\n          case \"turn_next\":\n            changeCanvas(\"next\");\n            break;\n        }\n      },\n      [checkClearDialog, saveCanvas, changeCanvas]\n    );\n\n    return (\n      <>\n        <canvas ref={canvasRef} height={height} width={width} />\n        <div\n          id=\"toolbox-open\"\n          style={\n            {\n              borderRadius: isToolboxOpen ? null : 5,\n            } as CSSProperties\n          }\n        >\n          <Iconfont\n            type={isToolboxOpen ? \"icon-turn_down\" : \"icon-turn_up\"}\n            style={{\n              width: \"100%\",\n              fontSize: 32,\n            }}\n            clickEvent={toolboxOpenClick}\n          />\n        </div>\n        <CSSTransition\n          in={isToolboxOpen}\n          timeout={300}\n          classNames=\"toolbox\"\n          unmountOnExit\n        >\n          <div id=\"toolbox\" /* 画笔/橡皮 */>\n            <span>Options</span>\n            <div className=\"options\">\n              {optionsMap.map((option, index) => {\n                return (\n                  <Iconfont\n                    svgRef={\n                      option === \"turn_back\"\n                        ? backRef\n                        : option === \"turn_next\"\n                        ? nextRef\n                        : undefined\n                    }\n                    key={index + option}\n                    type={\"icon-\" + option}\n                    className={option}\n                    style={{ fontSize: 50 }}\n                    clickEvent={(el) => onOptionsClick(el, option)}\n                  />\n                );\n              })}\n            </div>\n            <span>Toolbox</span>\n            <div className=\"tools\">\n              {toolsMap.map((tool, index) => {\n                return (\n                  <Iconfont\n                    key={index + tool}\n                    className={\n                      tool === \"eraser\"\n                        ? eraserEnabled\n                          ? \"active\"\n                          : \"\"\n                        : !eraserEnabled\n                        ? \"active\"\n                        : \"\"\n                    }\n                    type={\"icon-\" + tool}\n                    style={{ fontSize: 50 }}\n                    clickEvent={(e) => onToolsClick([e, tool])}\n                  />\n                );\n              })}\n            </div>\n            <div className=\"sizes\" /* 画笔粗细*/>\n              <input\n                style={\n                  {\n                    backgroundColor: eraserEnabled ? \"#ebeff4\" : strokeStyle,\n                  } as CSSProperties\n                }\n                type=\"range\"\n                id=\"range\"\n                name=\"range\"\n                min=\"1\"\n                max=\"20\"\n                value={lineWidth}\n                onChange={onSizesChange}\n              />\n            </div>\n            <ol className=\"colors\" /* 常用颜色选择 */>\n              {colorMap.map((color, index) => {\n                return (\n                  <li\n                    key={index + color}\n                    className={\n                      color === strokeStyle ? color + \" active\" : color\n                    }\n                    onClick={(e) => onColorsClick(e, \"li\", color)}\n                  ></li>\n                );\n              })}\n              <input\n                type=\"color\" // 调色盘\n                value={strokeStyle}\n                onChange={onColorsChange}\n                id=\"currentColor\"\n              />\n            </ol>\n          </div>\n        </CSSTransition>\n        <RenderDialog\n          width={300}\n          height={120}\n          id=\"clear-dialog\"\n          title=\"您确定要清空该画布吗？\"\n          message=\"一旦清空将无法撤回。\"\n          imgSrc={\"Drawing.png\"}\n          onCheck={checkClearDialog}\n          onClose={closeClearDialog}\n        />\n      </>\n    );\n  };\n  // canvas 默认属性\n  Canvas.defaultProps = {\n    width: window.innerWidth,\n    height: window.innerHeight,\n  };\n  return {\n    Canvas,\n    canvasHistory,\n    setCanvasHistory,\n    loadPic,\n  };\n};\n","import React, { useMemo, useState, CSSProperties } from \"react\";\nimport { Dialog, Button } from \"react-desktop/macOs\";\n\n/// <reference path=\"react-desktop.d.ts\" />\n\ninterface DialogProps {\n  width: number;\n  height: number;\n  id: string;\n  title?: string;\n  message?: string;\n  imgSrc?: string;\n  onCheck: (T: any) => void;\n  onClose: (T: any) => void;\n}\n\nexport const useDialog = () => {\n  const [isVisible, setIsVisible] = useState(false);\n  const openDialog = () => setIsVisible(true);\n  const closeDialog = () => setIsVisible(false);\n  const RenderDialog = ({\n    width,\n    height,\n    id,\n    title,\n    message,\n    imgSrc,\n    onCheck,\n    onClose,\n  }: DialogProps) => {\n    const styles = useMemo(\n      () => ({\n        width: width,\n        height: height,\n        display: \"fixed\",\n        left: `calc(50vw - ${width / 2}px)`,\n        top: `calc(50vh - ${height}px)`,\n        zIndex: 2000,\n        borderRadius: 4,\n      }),\n      [width, height]\n    );\n\n    const renderIcon = () => {\n      if (!imgSrc) return;\n      return (\n        <img\n          src={require(\"../../img/\" + imgSrc)}\n          width=\"52\"\n          height=\"52\"\n          alt=\"tip\"\n        />\n      );\n    };\n    return (\n      <>\n        {isVisible && (\n          <div id={id} style={styles as CSSProperties}>\n            <Dialog\n              title={title}\n              message={message}\n              icon={renderIcon()}\n              buttons={[\n                <Button onClick={onClose}>取消</Button>,\n                <Button color=\"blue\" onClick={onCheck}>\n                  确认\n                </Button>,\n              ]}\n            />\n          </div>\n        )}\n      </>\n    );\n  };\n\n  return {\n    openDialog,\n    closeDialog,\n    RenderDialog,\n  };\n};\n","import React, { useContext, useEffect, useState, useCallback } from \"react\";\nimport { useModal } from \"../modal/UseModal\";\nimport { FooterContext } from \"../footer/Footer\";\nimport { TitleBar } from \"react-desktop/macOs\";\nimport { UseCanvas } from \"./Canvas\";\nimport \"./canvas.scss\";\n/// <reference path=\"react-desktop.d.ts\" />\n\nexport const UseDrawing = () => {\n  const { open, close, RenderModal } = useModal();\n  const { Canvas, canvasHistory, setCanvasHistory, loadPic } = UseCanvas();\n  const Drawing = () => {\n    const [\n      isDrawingOpen,\n      setDrawingOpen,\n      isDrawingShow,\n      setDrawingShow,\n    ] = useContext(FooterContext);\n    const [style, setStyle] = useState({ width: 1200, height: 800 });\n    const [isFullscreen, setFullscreen] = useState(false);\n\n    // 监听 isDrawingOpen, 打开或关闭 Modal\n    useEffect(isDrawingOpen.type ? open : close, [isDrawingOpen]);\n\n    // 最大化\n    const maximizeClick = useCallback(() => {\n      if (isFullscreen) {\n        setStyle({ width: 1200, height: 800 });\n      } else {\n        setStyle({ width: -1, height: -1 });\n      }\n      setFullscreen(!isFullscreen);\n      // 需要添加画面保存 ?\n    }, [isFullscreen]);\n\n    return (\n      <RenderModal\n        data={{\n          width: style.width,\n          height: style.height,\n          id: \"DrawingView\",\n          moveId: \"DrawingMove\",\n          isShow: isDrawingShow,\n        }}\n      >\n        <div className=\"drawing-wrapper\">\n          <TitleBar\n            controls\n            id=\"DrawingMove\"\n            isFullscreen={isFullscreen}\n            onCloseClick={() => {\n              close();\n              setDrawingOpen({ ...isDrawingOpen, type: false });\n              // 清空历史绘画\n              setCanvasHistory([]);\n            }}\n            onMinimizeClick={() => {\n              setDrawingShow(false);\n              console.log(\"min\");\n              console.log(canvasHistory);\n            }}\n            // 没起作用？\n            onMaximizeClick={() => {\n              maximizeClick();\n              console.log(canvasHistory);\n            }}\n            onResizeClick={() => {\n              maximizeClick();\n              setTimeout(() => {\n                loadPic();\n              }, 50);\n            }}\n          />\n          <Canvas\n            height={\n              /* 全屏时，canvas高度为屏幕高度减去底下Docker栏高度，否则就按照设置的高度 */\n              isFullscreen ? document.body.clientHeight - 120 : style.height\n            }\n            width={isFullscreen ? document.body.clientWidth : style.width}\n          />\n        </div>\n      </RenderModal>\n    );\n  };\n  return {\n    Drawing,\n    loadPic,\n  };\n};\n","import React, { useState } from \"react\";\n\nimport Modal from \"./Modal\";\n\n// Modal组件最基础的两个事件，open/close\nexport const useModal = () => {\n  const [isVisible, setIsVisible] = useState(false);\n\n  const open = () => {\n    setIsVisible(true);\n    console.log(\"openDrawing\");\n  };\n  const close = () => {\n    setIsVisible(false);\n    console.log(\"closeDrawing\");\n  };\n\n  const RenderModal = ({\n    children,\n    data,\n  }: {\n    children: React.ReactChild;\n    data: {\n      width: number;\n      height: number;\n      id: string;\n      moveId: string;\n      isShow: boolean;\n    };\n  }) => (\n    <>\n      {isVisible && (\n        <Modal data={data} closeModal={close}>\n          {children}\n        </Modal>\n      )}\n    </>\n  );\n\n  return {\n    open,\n    close,\n    RenderModal,\n  };\n};\n","import React, {\n  useState,\n  useEffect,\n  useRef,\n  useCallback,\n  createContext,\n  CSSProperties,\n} from \"react\";\n\n// 加载 drawing\nimport { UseDrawing } from \"../drawing\";\nimport \"./index.scss\";\n\n// import { addListener } from \"cluster\";\n\nexport const FooterContext = createContext<any>([]);\n\ninterface OpenTypes {\n  type: boolean;\n  index?: number;\n}\n\nexport const Footer = () => {\n  // ---\n  const { Drawing, loadPic } = UseDrawing();\n  // docker 图标默认宽度\n  const [defaultWidth] = useState(76);\n  // dockDiv\n  const dockerRef = useRef<HTMLDivElement>(null);\n  // docker 图标列表\n  const [dockList] = useState<string[]>([\n    \"Finder.png\",\n    \"Launchpad.png\",\n    \"Chrome.png\",\n    \"PrefApp.png\",\n    \"Terminal.png\",\n    \"Calculator.png\",\n    \"Drawing.png\",\n  ]);\n  // docker 图标 放大系数\n  const [scaleNum] = useState(2);\n\n  // drawing 打开\n  const [isDrawingOpen, setDrawingOpen] = useState<OpenTypes>({\n    type: false,\n    index: 6,\n  });\n\n  // drawing 最小化\n  const [isDrawingShow, setDrawingShow] = useState(true);\n\n  // dockerRef 距离<html>内边距(div->footer + footer-> html)\n  const getDockerOffset = useCallback(\n    (el: HTMLElement, offsetStyle: \"top\" | \"left\"): number => {\n      const getOffset = offsetStyle === \"top\" ? el.offsetTop : el.offsetLeft;\n      if (el.offsetParent === null) {\n        return getOffset;\n      }\n      return (\n        getOffset + getDockerOffset(el.offsetParent as HTMLElement, offsetStyle)\n      );\n    },\n    []\n  );\n\n  // mouseleave 图标宽度恢复默认宽度\n  const mouseLeave = useCallback(() => {\n    if (!dockerRef.current) {\n      return;\n    }\n    console.log(\"leave\");\n    const imgList = dockerRef.current.childNodes;\n    for (let i = 0; i < imgList.length; i++) {\n      const img = imgList[i] as HTMLDivElement;\n      img.style.width = img.style.height = defaultWidth + \"px\";\n    }\n  }, [defaultWidth]);\n\n  /**\n   * mousemove 图标宽度变化规则\n   * offsetTop 元素左上角到 offsetParent 的上内边距，此处为 footer\n   * offsetLeft 元素左上角到 offsetParent 的左内边距，此处为 footer\n   *\n   */\n  const mouseMove = useCallback(\n    ({ clientX, clientY }) => {\n      if (!dockerRef.current) {\n        return;\n      }\n      const imgList = dockerRef.current.childNodes;\n      for (let i = 0; i < imgList.length; i++) {\n        const img = imgList[i] as HTMLDivElement;\n        // x:点击处距离图标中心的横向距离\n        const x = img.offsetLeft + img.offsetWidth / 2 - clientX;\n        // y:点击处距离图标中心的纵向距离\n        const y =\n          img.offsetTop +\n          img.offsetHeight / 2 +\n          getDockerOffset(dockerRef.current, \"top\") -\n          clientY;\n        let scaleImg =\n          1 - Math.sqrt(x * x + y * y) / (imgList.length * defaultWidth);\n        if (scaleImg < 0.5) {\n          scaleImg = 0.5;\n        }\n        img.style.width = img.style.height =\n          defaultWidth * scaleNum * scaleImg + \"px\";\n      }\n    },\n    [getDockerOffset, defaultWidth, scaleNum]\n  );\n\n  const dockItemClick = useCallback(\n    (item, index) => {\n      if (!dockerRef.current) {\n        return;\n      }\n      // const imgList = dockerRef.current.childNodes;\n      // const img = imgList[index] as HTMLDivElement;\n      // console.log(canvasHistory);\n      switch (item) {\n        case \"Drawing.png\":\n          if (!isDrawingOpen.type) {\n            // setTimeout(() => {\n            setDrawingOpen({ type: !isDrawingOpen.type, index });\n            // img.classList.remove(\"bounce\");\n            // }, 2500);\n            return;\n          }\n          if (!isDrawingShow) {\n            setTimeout(() => {\n              // 重新画 CanvasHistory 最后一次\n              // bug: 如果在最小化之前，点击后退，step未保存，再次打开仍然是最后一次\n              loadPic();\n            }, 50);\n          }\n          // 最小化,或者显示，只有关闭 x，才真正关闭\n          setDrawingShow(!isDrawingShow);\n          return;\n      }\n    },\n    [isDrawingOpen, isDrawingShow]\n  );\n\n  // 初始化 图标宽度\n  useEffect(() => {\n    mouseLeave();\n  }, [mouseLeave]);\n\n  // 图标打开时，添加 active\n  useEffect(() => {\n    if (!dockerRef.current) {\n      return;\n    }\n    const imgList = dockerRef.current.childNodes;\n    [isDrawingOpen].forEach((item) => {\n      if (item.index) {\n        const img = imgList[item.index] as HTMLDivElement;\n        !item.type\n          ? img.classList.remove(\"active\")\n          : img.classList.add(\"active\");\n      }\n    });\n  }, [isDrawingOpen]);\n\n  // 绑定事件\n  useEffect(() => {\n    if (!dockerRef.current) {\n      return;\n    }\n    const docker: HTMLDivElement = dockerRef.current;\n    docker.addEventListener(\"mousemove\", mouseMove);\n    docker.addEventListener(\"mouseleave\", mouseLeave);\n    return () => {\n      docker.removeEventListener(\"mousemove\", mouseMove);\n      docker.removeEventListener(\"mouseleave\", mouseLeave);\n    };\n  }, [mouseMove, mouseLeave]);\n\n  return (\n    <>\n      <FooterContext.Provider\n        value={[isDrawingOpen, setDrawingOpen, isDrawingShow, setDrawingShow]}\n      >\n        <Drawing />\n      </FooterContext.Provider>\n      <footer id=\"AppFooter\">\n        <div ref={dockerRef} style={{ height: defaultWidth + 10 }} id=\"Docker\">\n          {dockList.map((item, index) => {\n            return (\n              <div\n                className={\n                  // 写死 drawing，需要修改\n                  index === 6 && isDrawingOpen.type\n                    ? \"DockItem active\"\n                    : \"DockItem\"\n                }\n                style={\n                  {\n                    backgroundImage:\n                      \"url(\" + require(\"../../img/\" + item) + \")\",\n                    backgroundPosition: \"center\",\n                    backgroundSize: \"cover\",\n                    backgroundRepeat: \"no-repeat\",\n                  } as CSSProperties\n                }\n                key={index + item}\n                onClick={() => dockItemClick(item, index)}\n              />\n            );\n          })}\n        </div>\n      </footer>\n    </>\n  );\n};\n","import React from \"react\";\nimport { Footer } from \"./components/footer/Footer\";\n// import { Counter } from \"./hooks/hooktest\";\n\n// import { UseHeader } from \"./components/header/Header\";\n// import { Canvas } from \"./components/drawing/Canvas\";\nimport \"./styles/App.scss\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      {/* <Counter initialCount={0}></Counter> */}\n      <div id=\"main-view\"></div>\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","var map = {\n\t\"./Calculator.png\": 167,\n\t\"./Chrome.png\": 168,\n\t\"./Drawing.png\": 169,\n\t\"./Finder.png\": 170,\n\t\"./Launchpad.png\": 171,\n\t\"./PrefApp.png\": 172,\n\t\"./Terminal.png\": 173,\n\t\"./gougu.jpg\": 174,\n\t\"./wallpaper.jpg\": 175,\n\t\"./wallpaper_small.jpg\": 176\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 54;"],"sourceRoot":""}